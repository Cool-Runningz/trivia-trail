import{b as ge,c as Z,r as V,e as je,j as t,C as he,f as ke,u as qe,H as de}from"./app-DPqtm5SO.js";import{d as oe,C as K,a as te,c as ee,b as ce}from"./card-COZTP0nh.js";import{B as ie,a as Ae,C as Re,A as Te}from"./badge-BGKmjwLj.js";import{m as Ne}from"./index-8n7gIAQa.js";import{B as pe}from"./button-BVcIjzyH.js";import{v as $e,l as ve,A as me}from"./app-layout-DTCqFw7f.js";import{C as Ce}from"./clock-CxNbVrcM.js";import{c as Y,d as Me}from"./index-B3XapsrO.js";import{T as be}from"./trophy-DmNvIFK5.js";import{C as we,A as Pe,G as Ie}from"./GameDetails-B-0BegBL.js";import{M as Le}from"./minus-BxLNp1MW.js";import{H as De,C as ue,M as fe,a as _e}from"./ErrorBoundary-_IzO3fvd.js";import"./app-DeJXVS98.js";import"./index-mjK58fCC.js";import"./index-r1ZjxIP-.js";import"./users-Ct-DAGnG.js";import"./chevron-down-PrK9rCP2.js";import"./target-DIMoFHSA.js";import"./refresh-cw-DK63mYMn.js";const Ee=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ge=ge("Award",Ee);const Qe=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Fe=ge("Medal",Qe);const He=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Be=ge("RotateCcw",He);const Ue=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],ze=ge("TrendingDown",Ue);const We=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Oe=ge("TrendingUp",We);function Ve(p){const e=Z.c(17),{roomCode:s,readySince:f,allPlayersAnswered:d}=p,[_,S]=V.useState(3),[w,n]=V.useState(!1),r=V.useRef(!1);let y;e[0]!==w||e[1]!==s?(y=()=>{w||r.current||(r.current=!0,n(!0),je.post(Ne.game.next(s).url,{},{onFinish:()=>n(!1),onError:R=>{console.error("Failed to advance question:",R),r.current=!1}}))},e[0]=w,e[1]=s,e[2]=y):y=e[2];const l=y;let q,C;e[3]!==l||e[4]!==f?(q=()=>{if(!f)return;const R=new Date(f).getTime(),Q=()=>{const L=Date.now(),I=Math.floor((L-R)/1e3),F=Math.max(0,3-I);S(F),F===0&&!r.current&&l()},P=setInterval(Q,100);return Q(),()=>clearInterval(P)},C=[f,l],e[3]=l,e[4]=f,e[5]=q,e[6]=C):(q=e[5],C=e[6]),V.useEffect(q,C);let N;e[7]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx($e,{className:"h-5 w-5 mr-2"}),e[7]=N):N=e[7];const a=w?"Loading...":"Next Question";let T;e[8]!==l||e[9]!==w||e[10]!==a?(T=t.jsxs(pe,{onClick:l,disabled:w,size:"lg",className:"w-full",children:[N,a]}),e[8]=l,e[9]=w,e[10]=a,e[11]=T):T=e[11];const j=_>0?d?`All players answered! Auto-advancing in ${_}s...`:`Time's up! Auto-advancing in ${_}s...`:"Advancing...";let A;e[12]!==j?(A=t.jsx("p",{className:"text-sm text-center text-muted-foreground",children:j}),e[12]=j,e[13]=A):A=e[13];let i;return e[14]!==T||e[15]!==A?(i=t.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[T,A]}),e[14]=T,e[15]=A,e[16]=i):i=e[16],i}function Xe(p){const e=Z.c(102),{roomCode:s,question:f,questionNumber:d,totalQuestions:_,timeRemaining:S,allPlayersAnswered:w,currentUserHasAnswered:n,isReadyForNext:r,readySince:y,isHost:l,onAnswerSubmit:q,disabled:C}=p,N=C===void 0?!1:C,[a,T]=V.useState(""),[j,A]=V.useState(!1),i=S<=0;let R;e[0]!==S?(R=()=>S>20?"text-green-600":S>10?"text-yellow-600":"text-red-600",e[0]=S,e[1]=R):R=e[1];const Q=R;let P;e[2]!==n||e[3]!==N||e[4]!==j||e[5]!==i?(P=J=>{N||n||j||i||T(J)},e[2]=n,e[3]=N,e[4]=j,e[5]=i,e[6]=P):P=e[6];const L=P;let I;e[7]!==n||e[8]!==j||e[9]!==q||e[10]!==d||e[11]!==s||e[12]!==a||e[13]!==i?(I=()=>{!a||n||j||i||(A(!0),je.post(Ne.game.answer(s).url,{selected_answer:a,question_index:d-1},{onSuccess:()=>{q?.(a)},onError:()=>{A(!1)},onFinish:()=>{A(!1)}}))},e[7]=n,e[8]=j,e[9]=q,e[10]=d,e[11]=s,e[12]=a,e[13]=i,e[14]=I):I=e[14];const F=I;let D;e[15]!==n||e[16]!==N||e[17]!==a||e[18]!==i?(D=J=>{let B;return N||n||i?B="w-full rounded-lg border p-4 text-left transition-all cursor-not-allowed opacity-50":B="w-full rounded-lg border p-4 text-left transition-all hover:bg-accent hover:text-accent-foreground cursor-pointer",a===J?B=B+" border-primary bg-primary/10 text-primary":B=B+" border-input bg-background",B},e[15]=n,e[16]=N,e[17]=a,e[18]=i,e[19]=D):D=e[19];const k=D;let E;e[20]!==a?(E=J=>{let B;return a===J?B="flex h-6 w-6 items-center justify-center rounded-full border-2 text-sm font-medium border-primary bg-primary text-primary-foreground":B="flex h-6 w-6 items-center justify-center rounded-full border-2 text-sm font-medium border-muted-foreground/30",B},e[20]=a,e[21]=E):E=e[21];const $=E,H=`h-5 w-5 ${Q()}`;let u;e[22]!==H?(u=t.jsx(Ce,{className:H}),e[22]=H,e[23]=u):u=e[23];const g=`text-2xl font-bold ${Q()}`;let o;e[24]!==g||e[25]!==S?(o=t.jsxs("span",{className:g,children:[S,"s"]}),e[24]=g,e[25]=S,e[26]=o):o=e[26];let c;e[27]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("span",{className:"text-sm text-muted-foreground",children:"remaining"}),e[27]=c):c=e[27];let m;e[28]!==o||e[29]!==u?(m=t.jsx(K,{children:t.jsx(te,{className:"pt-6",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center gap-2",children:[u,o,c]})})})}),e[28]=o,e[29]=u,e[30]=m):m=e[30];let x;e[31]!==d||e[32]!==_?(x=t.jsxs(ee,{className:"text-lg",children:["Question ",d," of ",_]}),e[31]=d,e[32]=_,e[33]=x):x=e[33];let M;e[34]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),e[34]=M):M=e[34];let b;e[35]!==f.category?(b=t.jsxs("div",{className:"flex items-center gap-2",children:[M,t.jsx("span",{className:"text-sm font-medium",children:f.category})]}),e[35]=f.category,e[36]=b):b=e[36];let h;e[37]!==x||e[38]!==b?(h=t.jsxs("div",{className:"flex items-center justify-between",children:[x,b]}),e[37]=x,e[38]=b,e[39]=h):h=e[39];let v;e[40]!==f.question?(v=t.jsx(oe,{className:"text-base leading-relaxed",dangerouslySetInnerHTML:{__html:f.question}}),e[40]=f.question,e[41]=v):v=e[41];let G;e[42]!==h||e[43]!==v?(G=t.jsxs(ce,{children:[h,v]}),e[42]=h,e[43]=v,e[44]=G):G=e[44];let U;if(e[45]!==n||e[46]!==N||e[47]!==k||e[48]!==$||e[49]!==L||e[50]!==j||e[51]!==f.shuffled_answers||e[52]!==i){let J;e[54]!==n||e[55]!==N||e[56]!==k||e[57]!==$||e[58]!==L||e[59]!==j||e[60]!==i?(J=(B,Se)=>t.jsx("button",{type:"button",onClick:()=>L(B),className:k(B),disabled:N||n||j||i,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:$(B),children:String.fromCharCode(65+Se)}),t.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:B}})]})},Se),e[54]=n,e[55]=N,e[56]=k,e[57]=$,e[58]=L,e[59]=j,e[60]=i,e[61]=J):J=e[61],U=f.shuffled_answers.map(J),e[45]=n,e[46]=N,e[47]=k,e[48]=$,e[49]=L,e[50]=j,e[51]=f.shuffled_answers,e[52]=i,e[53]=U}else U=e[53];let z;e[62]!==U?(z=t.jsx("div",{className:"grid gap-3",children:U}),e[62]=U,e[63]=z):z=e[63];let W;e[64]!==n||e[65]!==r?(W=n&&!r&&t.jsxs("div",{className:"flex items-center gap-2 text-green-600 justify-center",children:[t.jsx(he,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"Answer submitted! Waiting for others..."})]}),e[64]=n,e[65]=r,e[66]=W):W=e[66];let O;e[67]!==w||e[68]!==l?(O=w&&!l&&t.jsxs("div",{className:"flex items-center gap-2 text-blue-600 justify-center",children:[t.jsx(he,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"All players answered! Waiting for host..."})]}),e[67]=w,e[68]=l,e[69]=O):O=e[69];let X;e[70]!==w||e[71]!==l||e[72]!==i?(X=i&&!w&&!l&&t.jsxs("div",{className:"flex items-center gap-2 text-orange-600 justify-center",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"Time's up! Waiting for host..."})]}),e[70]=w,e[71]=l,e[72]=i,e[73]=X):X=e[73];let se;e[74]!==w||e[75]!==l||e[76]!==r||e[77]!==y||e[78]!==s?(se=r&&l&&t.jsx(Ve,{roomCode:s,readySince:y,allPlayersAnswered:w}),e[74]=w,e[75]=l,e[76]=r,e[77]=y,e[78]=s,e[79]=se):se=e[79];let le;e[80]!==n||e[81]!==N||e[82]!==F||e[83]!==j||e[84]!==a||e[85]!==i?(le=!n&&!i&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:a?"Click submit to lock in your answer":"Select an answer"}),t.jsx(pe,{onClick:F,disabled:!a||n||j||N||i,className:"min-w-[120px]",children:j?"Submitting...":"Submit Answer"})]}),e[80]=n,e[81]=N,e[82]=F,e[83]=j,e[84]=a,e[85]=i,e[86]=le):le=e[86];let re;e[87]!==W||e[88]!==O||e[89]!==X||e[90]!==se||e[91]!==le?(re=t.jsxs("div",{className:"pt-4",children:[W,O,X,se,le]}),e[87]=W,e[88]=O,e[89]=X,e[90]=se,e[91]=le,e[92]=re):re=e[92];let ne;e[93]!==z||e[94]!==re?(ne=t.jsx(te,{children:t.jsxs("div",{className:"space-y-4",children:[z,re]})}),e[93]=z,e[94]=re,e[95]=ne):ne=e[95];let ae;e[96]!==G||e[97]!==ne?(ae=t.jsxs(K,{children:[G,ne]}),e[96]=G,e[97]=ne,e[98]=ae):ae=e[98];let ye;return e[99]!==m||e[100]!==ae?(ye=t.jsxs("div",{className:"space-y-4",children:[m,ae]}),e[99]=m,e[100]=ae,e[101]=ye):ye=e[101],ye}function Je(p){const e=Z.c(57),{results:s,autoProgressDelay:f,onAutoProgress:d}=p,_=f===void 0?5e3:f,[S,w]=V.useState(Math.floor(_/1e3)),[n,r]=V.useState(!1);let y,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{const b=setTimeout(()=>r(!0),100);return()=>clearTimeout(b)},l=[],e[0]=y,e[1]=l):(y=e[0],l=e[1]),V.useEffect(y,l);let q,C;e[2]!==d?(q=()=>{if(!d)return;const b=setInterval(()=>{w(h=>h<=1?(clearInterval(b),d(),0):h-1)},1e3);return()=>clearInterval(b)},C=[d],e[2]=d,e[3]=q,e[4]=C):(q=e[3],C=e[4]),V.useEffect(q,C);const N=Ze,a=Ye,T=n?"opacity-100 translate-y-0":"opacity-0 translate-y-4";let j;e[5]!==T?(j=Y("border-2 transition-all duration-500",T),e[5]=T,e[6]=j):j=e[6];let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(he,{className:"h-5 w-5 text-green-600"}),t.jsx(ee,{className:"text-green-700 dark:text-green-400",children:"Correct Answer"})]}),e[7]=A):A=e[7];let i;e[8]!==s.correct_answer?(i=t.jsxs(ce,{className:"bg-green-50 dark:bg-green-950/20",children:[A,t.jsx(oe,{className:"text-base font-medium text-green-900 dark:text-green-300",dangerouslySetInnerHTML:{__html:s.correct_answer}})]}),e[8]=s.correct_answer,e[9]=i):i=e[9];let R;e[10]!==j||e[11]!==i?(R=t.jsx(K,{className:j,children:i}),e[10]=j,e[11]=i,e[12]=R):R=e[12];const Q=n?"opacity-100 translate-y-0":"opacity-0 translate-y-4";let P;e[13]!==Q?(P=Y("transition-all duration-500 delay-200",Q),e[13]=Q,e[14]=P):P=e[14];let L;e[15]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(be,{className:"h-5 w-5 text-primary"}),t.jsx(ee,{children:"Leaderboard"})]}),e[15]=L):L=e[15];let I;e[16]!==S||e[17]!==d?(I=d&&S>0&&t.jsxs(ie,{variant:"outline",children:["Next question in ",S,"s"]}),e[16]=S,e[17]=d,e[18]=I):I=e[18];let F;e[19]!==I?(F=t.jsx(ce,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[L,I]})}),e[19]=I,e[20]=F):F=e[20];let D;if(e[21]!==s.leaderboard||e[22]!==s.participant_results||e[23]!==n){let b;e[25]!==s.participant_results||e[26]!==n?(b=(h,v)=>{const G=s.participant_results.find(W=>W.participant.id===h.participant.id),U=G?.is_correct||!1,z=G?.points_earned||0;return t.jsx("div",{className:Y("flex items-center justify-between p-4 rounded-lg border transition-all duration-300",v===0&&"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",v===1&&"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800",v===2&&"bg-orange-50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-800",v>2&&"bg-background border-border",n?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"),style:{transitionDelay:`${300+v*100}ms`},children:t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("div",{className:Y("flex h-8 w-8 items-center justify-center rounded-full font-bold",v===0&&"bg-yellow-500 text-white",v===1&&"bg-gray-400 text-white",v===2&&"bg-orange-500 text-white",v>2&&"bg-muted text-muted-foreground"),children:h.position}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"font-medium",children:h.participant.user.name})}),t.jsx("div",{className:"flex items-center gap-2",children:U?t.jsx(he,{className:"h-5 w-5 text-green-600"}):t.jsx(we,{className:"h-5 w-5 text-red-600"})}),t.jsxs("div",{className:"flex items-center gap-1 min-w-[80px] justify-end",children:[N(z),t.jsxs("span",{className:Y("font-semibold",a(z)),children:[z>0?"+":"",z]})]}),t.jsxs("div",{className:"min-w-[100px] text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:h.score}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"total points"})]})]})},h.participant.id)},e[25]=s.participant_results,e[26]=n,e[27]=b):b=e[27],D=s.leaderboard.map(b),e[21]=s.leaderboard,e[22]=s.participant_results,e[23]=n,e[24]=D}else D=e[24];let k;e[28]!==D?(k=t.jsx(te,{children:t.jsx("div",{className:"space-y-2",children:D})}),e[28]=D,e[29]=k):k=e[29];let E;e[30]!==P||e[31]!==F||e[32]!==k?(E=t.jsxs(K,{className:P,children:[F,k]}),e[30]=P,e[31]=F,e[32]=k,e[33]=E):E=e[33];const $=n?"opacity-100 translate-y-0":"opacity-0 translate-y-4";let H;e[34]!==$?(H=Y("transition-all duration-500 delay-300",$),e[34]=$,e[35]=H):H=e[35];let u;e[36]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(ee,{children:"Round Summary"}),e[36]=u):u=e[36];let g;e[37]!==s.participant_results?(g=s.participant_results.filter(Ke),e[37]=s.participant_results,e[38]=g):g=e[38];let o;e[39]!==s.participant_results.length||e[40]!==g.length?(o=t.jsxs(ce,{children:[u,t.jsxs(oe,{children:[g.length," of"," ",s.participant_results.length," players answered correctly"]})]}),e[39]=s.participant_results.length,e[40]=g.length,e[41]=o):o=e[41];let c;if(e[42]!==s.participant_results||e[43]!==n){let b;e[45]!==n?(b=(h,v)=>t.jsxs("div",{className:Y("flex items-center justify-between p-3 rounded-lg border transition-all duration-300",h.is_correct?"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",n?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"),style:{transitionDelay:`${400+v*50}ms`},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[h.is_correct?t.jsx(he,{className:"h-5 w-5 text-green-600"}):t.jsx(we,{className:"h-5 w-5 text-red-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:h.participant.user.name}),h.selected_answer&&t.jsx("div",{className:"text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:h.selected_answer}})]})]}),h.response_time_ms&&t.jsxs(ie,{variant:"outline",className:"text-xs",children:[(h.response_time_ms/1e3).toFixed(2),"s"]})]},h.participant.id),e[45]=n,e[46]=b):b=e[46],c=s.participant_results.map(b),e[42]=s.participant_results,e[43]=n,e[44]=c}else c=e[44];let m;e[47]!==c?(m=t.jsx(te,{children:t.jsx("div",{className:"space-y-2",children:c})}),e[47]=c,e[48]=m):m=e[48];let x;e[49]!==H||e[50]!==o||e[51]!==m?(x=t.jsxs(K,{className:H,children:[o,m]}),e[49]=H,e[50]=o,e[51]=m,e[52]=x):x=e[52];let M;return e[53]!==R||e[54]!==E||e[55]!==x?(M=t.jsxs("div",{className:"space-y-6",children:[R,E,x]}),e[53]=R,e[54]=E,e[55]=x,e[56]=M):M=e[56],M}function Ke(p){return p.is_correct}function Ye(p){return p>0?"text-green-600":p<0?"text-red-600":"text-muted-foreground"}function Ze(p){return p>0?t.jsx(Oe,{className:"h-4 w-4 text-green-600"}):p<0?t.jsx(ze,{className:"h-4 w-4 text-red-600"}):t.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})}function et(p){const e=Z.c(4),{questions:s}=p;let f;e[0]!==s?(f=s.map(tt),e[0]=s,e[1]=f):f=e[1];const d=f;let _;return e[2]!==d?(_=t.jsx(Pe,{answers:d}),e[2]=d,e[3]=_):_=e[3],_}function tt(p){return{question:p.question_text,selected_answer:p.user_answer||"Not answered",correct_answer:p.correct_answer,is_correct:p.is_correct,points_earned:p.points_earned}}function st(p){const e=Z.c(44),{leaderboard:s,totalQuestions:f,difficulty:d,questionsReview:_,category:S}=p,w=it,n=at,r=nt;let y,l,q,C,N,a,T;if(e[0]!==s||e[1]!==f){const F=(u,g)=>{const m=s.filter(x=>x.score===g).length>1?`Tied ${u}${D(u)}`:`${u}${D(u)} Place`;switch(u){case 1:return t.jsx(ie,{className:"bg-yellow-500 hover:bg-yellow-600",children:m});case 2:return t.jsx(ie,{className:"bg-gray-400 hover:bg-gray-500",children:m});case 3:return t.jsx(ie,{className:"bg-orange-500 hover:bg-orange-600",children:m});default:return t.jsx(ie,{variant:"outline",children:m})}},D=rt,k=s[0],E=f*30,$=k?.score||0;if(e[9]!==s||e[10]!==$||e[11]!==k){let u;e[14]!==$?(u=c=>c.score===$,e[14]=$,e[15]=u):u=e[15];const g=s.filter(u),o=g.length>1;a="space-y-6",T=k&&t.jsx(K,{className:"border-2 border-yellow-500 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20",children:t.jsxs(ce,{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(be,{className:"h-20 w-20 text-yellow-500 animate-bounce"}),!o&&t.jsx("div",{className:"absolute -top-2 -right-2",children:t.jsx("div",{className:"h-8 w-8 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold",children:"1"})})]})}),o?t.jsxs(t.Fragment,{children:[t.jsx(ee,{className:"text-3xl",children:"ðŸŽ‰ It's a Tie! ðŸŽ‰"}),t.jsxs(oe,{className:"text-lg",children:[g.map(lt).join(" & ")," tied with ",$," points!"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(ee,{className:"text-3xl",children:["ðŸŽ‰ ",k.participant.user.name," Wins! ðŸŽ‰"]}),t.jsxs(oe,{className:"text-lg",children:["Final Score: ",k.score," points"]})]})]})}),e[9]=s,e[10]=$,e[11]=k,e[12]=a,e[13]=T}else a=e[12],T=e[13];l=K;let H;e[16]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsxs(ee,{className:"flex items-center gap-2",children:[t.jsx(be,{className:"h-5 w-5 text-primary"}),"Final Standings"]}),e[16]=H):H=e[16],e[17]!==s.length?(N=t.jsxs(ce,{children:[H,t.jsxs(oe,{children:["Game completed with ",s.length," players"]})]}),e[17]=s.length,e[18]=N):N=e[18],y=te,q="space-y-3",C=s.map(u=>{const g=E>0?Math.round(u.score/E*100):0;return t.jsxs("div",{className:Y("flex items-center gap-4 p-4 rounded-lg border transition-all",u.position===1&&"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",u.position===2&&"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800",u.position===3&&"bg-orange-50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-800",u.position>3&&"bg-background border-border"),children:[t.jsx("div",{className:"flex items-center justify-center w-12",children:r(u.position)||t.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:u.position})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-lg",children:u.participant.user.name}),F(u.position,u.score)]}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:[g,"% accuracy"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold text-primary",children:u.score}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]},u.participant.id)}),e[0]=s,e[1]=f,e[2]=y,e[3]=l,e[4]=q,e[5]=C,e[6]=N,e[7]=a,e[8]=T}else y=e[2],l=e[3],q=e[4],C=e[5],N=e[6],a=e[7],T=e[8];let j;e[19]!==q||e[20]!==C?(j=t.jsx("div",{className:q,children:C}),e[19]=q,e[20]=C,e[21]=j):j=e[21];let A;e[22]!==y||e[23]!==j?(A=t.jsx(y,{children:j}),e[22]=y,e[23]=j,e[24]=A):A=e[24];let i;e[25]!==l||e[26]!==N||e[27]!==A?(i=t.jsxs(l,{children:[N,A]}),e[25]=l,e[26]=N,e[27]=A,e[28]=i):i=e[28];let R;e[29]!==S||e[30]!==d||e[31]!==s.length||e[32]!==f?(R=t.jsx(Ie,{difficulty:d,totalQuestions:f,playerCount:s.length,category:S}),e[29]=S,e[30]=d,e[31]=s.length,e[32]=f,e[33]=R):R=e[33];let Q;e[34]!==_?(Q=_&&_.length>0&&t.jsx(et,{questions:_}),e[34]=_,e[35]=Q):Q=e[35];let P;e[36]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsxs(pe,{variant:"outline",size:"lg",onClick:w,children:[t.jsx(De,{className:"h-5 w-5 mr-2"}),"Return to Lobby"]}),e[36]=P):P=e[36];let L;e[37]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{className:"flex gap-4 justify-center",children:[P,t.jsxs(pe,{size:"lg",onClick:n,children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Play Again"]})]}),e[37]=L):L=e[37];let I;return e[38]!==Q||e[39]!==a||e[40]!==T||e[41]!==i||e[42]!==R?(I=t.jsxs("div",{className:a,children:[T,i,R,Q,L]}),e[38]=Q,e[39]=a,e[40]=T,e[41]=i,e[42]=R,e[43]=I):I=e[43],I}function lt(p){return p.participant.user.name}function rt(p){const e=p%10,s=p%100;return e===1&&s!==11?"st":e===2&&s!==12?"nd":e===3&&s!==13?"rd":"th"}function nt(p){switch(p){case 1:return t.jsx(be,{className:"h-6 w-6 text-yellow-500"});case 2:return t.jsx(Fe,{className:"h-6 w-6 text-gray-400"});case 3:return t.jsx(Ge,{className:"h-6 w-6 text-orange-500"});default:return null}}function at(){je.visit(ve.index().url)}function it(){je.visit(ve.index().url)}function ot(p){const e=Z.c(7),{roomCode:s}=p,[f,d]=V.useState(!1);let _;e[0]!==s?(_=()=>{confirm("Cancel this game? This will end the game for all players and delete the room. This action cannot be undone.")&&(d(!0),je.delete(Ne.room.destroy(s).url,{onFinish:()=>d(!1)}))},e[0]=s,e[1]=_):_=e[1];const S=_;let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(we,{className:"h-4 w-4 mr-2"}),e[2]=w):w=e[2];const n=f?"Cancelling...":"Cancel Game";let r;return e[3]!==S||e[4]!==f||e[5]!==n?(r=t.jsxs(pe,{variant:"destructive",size:"sm",onClick:S,disabled:f,children:[w,n]}),e[3]=S,e[4]=f,e[5]=n,e[6]=r):r=e[6],r}const ct=1e3;function dt(p,e){const s=Z.c(6),f=p===void 0?ct:p,d=e===void 0?!0:e,[_,S]=V.useState("connected"),[w,n]=V.useState(null);let r;s[0]===Symbol.for("react.memo_cache_sentinel")?(r=["room","participants","currentQuestion","timeRemaining","roundResults","finalStandings","gameState"],s[0]=r):r=s[0];let y;s[1]!==d?(y={only:r,onSuccess:()=>{d&&(S("connected"),n(new Date))},onError:()=>{d&&S("reconnecting")}},s[1]=d,s[2]=y):y=s[2],ke(d?f:999999999,y);let l;return s[3]!==_||s[4]!==w?(l={connectionStatus:_,lastUpdate:w},s[3]=_,s[4]=w,s[5]=l):l=s[5],l}const xe=[{title:"Dashboard",href:Me().url},{title:"Multiplayer Lobby",href:ve.index().url},{title:"Playing Game",href:"#"}];function Rt(p){const e=Z.c(103),{gameState:s}=p,{auth:f}=qe().props,d=s.room.host_user_id===f.user.id;let _;e[0]!==s?(_=()=>{const{room:g,round_results:o,game_status:c}=s;return g.status==="completed"||c==="completed"?"completed":o?"results":s.current_question?"active":"lobby"},e[0]=s,e[1]=_):_=e[1];const w=_(),n=w==="active"?1e3:w==="results"?2e3:3e3,{connectionStatus:r,lastUpdate:y}=dt(n,w!=="completed"),{room:l,current_question:q,current_question_index:C,time_remaining:N,round_results:a,game_status:T,all_players_answered:j,current_user_has_answered:A,is_ready_for_next:i,ready_since:R}=s,Q=j===void 0?!1:j,P=A===void 0?!1:A,L=i===void 0?!1:i,I=R===void 0?null:R;if((l.status==="completed"||T==="completed")&&!a?.leaderboard){let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(de,{title:"Loading Results..."}),e[2]=g):g=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx("h1",{className:"text-3xl font-bold",children:"Game Complete!"}),e[3]=o):o=e[3];let c;e[4]!==r?(c=t.jsxs("div",{className:"flex items-center justify-between",children:[o,t.jsx(ue,{status:r})]}),e[4]=r,e[5]=c):c=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(K,{children:t.jsx(te,{className:"pt-6",children:t.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),t.jsx("p",{className:"text-muted-foreground",children:"Loading final results..."})]})})}),e[6]=m):m=e[6];let x;return e[7]!==c?(x=t.jsx(me,{breadcrumbs:xe,children:t.jsxs(fe,{children:[g,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 w-full",children:[c,m]})})]})}),e[7]=c,e[8]=x):x=e[8],x}if((l.status==="completed"||T==="completed")&&a?.leaderboard){let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(de,{title:"Game Complete"}),e[9]=g):g=e[9];let o;e[10]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx("h1",{className:"text-3xl font-bold",children:"Game Complete!"}),e[10]=o):o=e[10];let c;e[11]!==r?(c=t.jsxs("div",{className:"flex items-center justify-between",children:[o,t.jsx(ue,{status:r})]}),e[11]=r,e[12]=c):c=e[12];let m;e[13]!==l.room_code||e[14]!==l.settings.category||e[15]!==l.settings.difficulty||e[16]!==l.settings.total_questions||e[17]!==a.leaderboard||e[18]!==a.questions_review?(m=t.jsx(st,{leaderboard:a.leaderboard,totalQuestions:l.settings.total_questions,difficulty:l.settings.difficulty,roomCode:l.room_code,questionsReview:a.questions_review,category:l.settings.category}),e[13]=l.room_code,e[14]=l.settings.category,e[15]=l.settings.difficulty,e[16]=l.settings.total_questions,e[17]=a.leaderboard,e[18]=a.questions_review,e[19]=m):m=e[19];let x;return e[20]!==c||e[21]!==m?(x=t.jsx(me,{breadcrumbs:xe,children:t.jsxs(fe,{children:[g,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 w-full",children:[c,m]})})]})}),e[20]=c,e[21]=m,e[22]=x):x=e[22],x}if(a){const g=`Round ${C} Results`;let o;e[23]!==g?(o=t.jsx(de,{title:g}),e[23]=g,e[24]=o):o=e[24];let c;e[25]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("h1",{className:"text-3xl font-bold",children:"Round Results"}),e[25]=c):c=e[25];let m;e[26]!==C||e[27]!==l.settings.total_questions?(m=t.jsxs("div",{children:[c,t.jsxs("p",{className:"text-muted-foreground",children:["Question ",C," of ",l.settings.total_questions]})]}),e[26]=C,e[27]=l.settings.total_questions,e[28]=m):m=e[28];let x;e[29]!==r?(x=t.jsx(ue,{status:r}),e[29]=r,e[30]=x):x=e[30];let M;e[31]!==x||e[32]!==m?(M=t.jsxs("div",{className:"flex items-center justify-between",children:[m,x]}),e[31]=x,e[32]=m,e[33]=M):M=e[33];let b;e[34]!==r||e[35]!==y?(b=t.jsx(_e,{status:r,lastUpdate:y,compact:!0}),e[34]=r,e[35]=y,e[36]=b):b=e[36];let h;e[37]!==a?(h=t.jsx(Je,{results:a,autoProgressDelay:4e3}),e[37]=a,e[38]=h):h=e[38];let v;e[39]!==M||e[40]!==b||e[41]!==h?(v=t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 w-full",children:[M,b,h]})}),e[39]=M,e[40]=b,e[41]=h,e[42]=v):v=e[42];let G;return e[43]!==v||e[44]!==o?(G=t.jsx(me,{breadcrumbs:xe,children:t.jsxs(fe,{children:[o,v]})}),e[43]=v,e[44]=o,e[45]=G):G=e[45],G}if(q){const g=`Question ${C+1}`;let o;e[46]!==g?(o=t.jsx(de,{title:g}),e[46]=g,e[47]=o):o=e[47];let c;e[48]!==l.room_code?(c=t.jsxs("h1",{className:"text-3xl font-bold",children:["Room ",l.room_code]}),e[48]=l.room_code,e[49]=c):c=e[49];const m=C+1;let x;e[50]!==l.settings.total_questions||e[51]!==m?(x=t.jsxs("p",{className:"text-muted-foreground",children:["Question ",m," of ",l.settings.total_questions]}),e[50]=l.settings.total_questions,e[51]=m,e[52]=x):x=e[52];let M;e[53]!==x||e[54]!==c?(M=t.jsxs("div",{children:[c,x]}),e[53]=x,e[54]=c,e[55]=M):M=e[55];let b;e[56]!==r?(b=t.jsx(ue,{status:r}),e[56]=r,e[57]=b):b=e[57];let h;e[58]!==d||e[59]!==l.room_code?(h=d&&t.jsx(ot,{roomCode:l.room_code}),e[58]=d,e[59]=l.room_code,e[60]=h):h=e[60];let v;e[61]!==b||e[62]!==h?(v=t.jsxs("div",{className:"flex items-center gap-4",children:[b,h]}),e[61]=b,e[62]=h,e[63]=v):v=e[63];let G;e[64]!==M||e[65]!==v?(G=t.jsxs("div",{className:"flex items-center justify-between",children:[M,v]}),e[64]=M,e[65]=v,e[66]=G):G=e[66];let U;e[67]!==r||e[68]!==y?(U=t.jsx(_e,{status:r,lastUpdate:y,compact:!0}),e[67]=r,e[68]=y,e[69]=U):U=e[69];const z=C+1;let W;e[70]!==Q||e[71]!==q||e[72]!==P||e[73]!==d||e[74]!==L||e[75]!==I||e[76]!==l.room_code||e[77]!==l.settings.total_questions||e[78]!==z||e[79]!==N?(W=t.jsx(Xe,{roomCode:l.room_code,question:q,questionNumber:z,totalQuestions:l.settings.total_questions,timeRemaining:N,allPlayersAnswered:Q,currentUserHasAnswered:P,isReadyForNext:L,readySince:I,isHost:d}),e[70]=Q,e[71]=q,e[72]=P,e[73]=d,e[74]=L,e[75]=I,e[76]=l.room_code,e[77]=l.settings.total_questions,e[78]=z,e[79]=N,e[80]=W):W=e[80];let O;e[81]!==G||e[82]!==U||e[83]!==W?(O=t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 w-full",children:[G,U,W]})}),e[81]=G,e[82]=U,e[83]=W,e[84]=O):O=e[84];let X;return e[85]!==O||e[86]!==o?(X=t.jsx(me,{breadcrumbs:xe,children:t.jsxs(fe,{children:[o,O]})}),e[85]=O,e[86]=o,e[87]=X):X=e[87],X}let F;e[88]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(de,{title:"Waiting..."}),e[88]=F):F=e[88];let D;e[89]!==l.room_code?(D=t.jsxs("h1",{className:"text-3xl font-bold",children:["Room ",l.room_code]}),e[89]=l.room_code,e[90]=D):D=e[90];let k;e[91]!==r?(k=t.jsx(ue,{status:r}),e[91]=r,e[92]=k):k=e[92];let E;e[93]!==D||e[94]!==k?(E=t.jsxs("div",{className:"flex items-center justify-between",children:[D,k]}),e[93]=D,e[94]=k,e[95]=E):E=e[95];let $;e[96]!==r||e[97]!==y?($=t.jsx(_e,{status:r,lastUpdate:y}),e[96]=r,e[97]=y,e[98]=$):$=e[98];let H;e[99]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(K,{children:t.jsx(te,{className:"pt-6",children:t.jsxs(Ae,{children:[t.jsx(Re,{className:"h-4 w-4"}),t.jsx(Te,{children:"Waiting for game to start..."})]})})}),e[99]=H):H=e[99];let u;return e[100]!==$||e[101]!==E?(u=t.jsx(me,{breadcrumbs:xe,children:t.jsxs(fe,{children:[F,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 w-full",children:[E,$,H]})})]})}),e[100]=$,e[101]=E,e[102]=u):u=e[102],u}export{Rt as default};
