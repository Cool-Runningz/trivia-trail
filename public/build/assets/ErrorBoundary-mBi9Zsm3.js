import{b as S,c as _,j as t,C as T,r as H,e as E}from"./app-CkH2H5Bb.js";import{B as I,A as B,a as D,C as M}from"./badge-B_YdIAio.js";import{c as u}from"./index-B8aXxZ10.js";import{R as L}from"./refresh-cw-Dp_r5Vlw.js";import{C as z,b as $,c as O,d as W,a as F}from"./card-D4taF_YK.js";import{B as A}from"./button-BUj9zpNp.js";import{l as P}from"./app-layout-Y-C7wse8.js";const U=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],q=S("House",U);const G=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],J=S("WifiOff",G);function te(k){const e=_.c(38),{status:s,lastUpdate:h,compact:f}=k,m=f===void 0?!1:f;let o;e[0]!==s?(o=()=>{switch(s){case"connected":return{icon:T,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-950/20",borderColor:"border-green-200 dark:border-green-800",label:"Connected",description:"Real-time updates active",showRetry:!1};case"reconnecting":return{icon:L,color:"text-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-950/20",borderColor:"border-yellow-200 dark:border-yellow-800",label:"Reconnecting",description:"Attempting to reconnect...",showRetry:!1};case"disconnected":return{icon:J,color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-950/20",borderColor:"border-red-200 dark:border-red-800",label:"Disconnected",description:"Connection lost. Please check your internet connection and refresh the page.",showRetry:!1}}},e[0]=s,e[1]=o):o=e[1];const p=o;let a,r,l,n,c,i,d,b,x;if(e[2]!==m||e[3]!==p||e[4]!==s){x=Symbol.for("react.early_return_sentinel");e:{r=p();const R=r.icon;if(s==="connected"&&m){x=null;break e}if(m){x=t.jsxs(I,{variant:"outline",className:u("gap-1.5",r.bgColor,r.borderColor),children:[t.jsx(R,{className:u("h-3 w-3",r.color,s==="reconnecting"&&"animate-spin")}),t.jsx("span",{className:r.color,children:r.label})]});break e}a=D,b=u(r.bgColor,r.borderColor),i="flex items-start gap-3",d=t.jsx(R,{className:u("h-5 w-5 mt-0.5",r.color,s==="reconnecting"&&"animate-spin")}),c="flex-1",n="flex items-center gap-2 mb-1",l=u("font-semibold",r.color)}e[2]=m,e[3]=p,e[4]=s,e[5]=a,e[6]=r,e[7]=l,e[8]=n,e[9]=c,e[10]=i,e[11]=d,e[12]=b,e[13]=x}else a=e[5],r=e[6],l=e[7],n=e[8],c=e[9],i=e[10],d=e[11],b=e[12],x=e[13];if(x!==Symbol.for("react.early_return_sentinel"))return x;let g;e[14]!==r.label||e[15]!==l?(g=t.jsx("span",{className:l,children:r.label}),e[14]=r.label,e[15]=l,e[16]=g):g=e[16];let y;e[17]!==h||e[18]!==s?(y=h&&s==="connected"&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last update: ",h.toLocaleTimeString()]}),e[17]=h,e[18]=s,e[19]=y):y=e[19];let j;e[20]!==g||e[21]!==y||e[22]!==n?(j=t.jsxs("div",{className:n,children:[g,y]}),e[20]=g,e[21]=y,e[22]=n,e[23]=j):j=e[23];let C;e[24]!==r.description?(C=t.jsx(B,{className:"text-sm",children:r.description}),e[24]=r.description,e[25]=C):C=e[25];let N;e[26]!==j||e[27]!==C||e[28]!==c?(N=t.jsxs("div",{className:c,children:[j,C]}),e[26]=j,e[27]=C,e[28]=c,e[29]=N):N=e[29];let w;e[30]!==N||e[31]!==i||e[32]!==d?(w=t.jsxs("div",{className:i,children:[d,N]}),e[30]=N,e[31]=i,e[32]=d,e[33]=w):w=e[33];let v;return e[34]!==a||e[35]!==w||e[36]!==b?(v=t.jsx(a,{className:b,children:w}),e[34]=a,e[35]=w,e[36]=b,e[37]=v):v=e[37],v}function re(k){const e=_.c(23),{status:s,className:h}=k;let f;e[0]!==s?(f=()=>{switch(s){case"connected":return{color:"bg-green-500",pulse:!1,tooltip:"Connected"};case"reconnecting":return{color:"bg-yellow-500",pulse:!0,tooltip:"Reconnecting..."};case"disconnected":return{color:"bg-red-500",pulse:!0,tooltip:"Disconnected"}}},e[0]=s,e[1]=f):f=e[1];const m=f;let o,p,a,r,l,n;e[2]!==h||e[3]!==m?(o=m(),e[10]!==h?(l=u("flex items-center gap-2",h),e[10]=h,e[11]=l):l=e[11],n=o.tooltip,p="relative",a=t.jsx("div",{className:u("h-2 w-2 rounded-full",o.color)}),r=o.pulse&&t.jsx("div",{className:u("absolute inset-0 h-2 w-2 rounded-full animate-ping",o.color,"opacity-75")}),e[2]=h,e[3]=m,e[4]=o,e[5]=p,e[6]=a,e[7]=r,e[8]=l,e[9]=n):(o=e[4],p=e[5],a=e[6],r=e[7],l=e[8],n=e[9]);let c;e[12]!==p||e[13]!==a||e[14]!==r?(c=t.jsxs("div",{className:p,children:[a,r]}),e[12]=p,e[13]=a,e[14]=r,e[15]=c):c=e[15];let i;e[16]!==o.tooltip?(i=t.jsx("span",{className:"text-xs text-muted-foreground",children:o.tooltip}),e[16]=o.tooltip,e[17]=i):i=e[17];let d;return e[18]!==l||e[19]!==n||e[20]!==c||e[21]!==i?(d=t.jsxs("div",{className:l,title:n,children:[c,i]}),e[18]=l,e[19]=n,e[20]=c,e[21]=i,e[22]=d):d=e[22],d}class se extends H.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Multiplayer Error Boundary caught an error:",e,s),this.setState({error:e,errorInfo:s}),this.props.onError?.(e,s)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),E.reload()};handleReturnToLobby=()=>{E.visit(P.index().url)};render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"container mx-auto py-8",children:t.jsxs(z,{className:"max-w-2xl mx-auto border-destructive",children:[t.jsx($,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(M,{className:"h-6 w-6 text-destructive"}),t.jsxs("div",{children:[t.jsx(O,{children:"Something went wrong"}),t.jsx(W,{children:"An error occurred in the multiplayer game"})]})]})}),t.jsxs(F,{className:"space-y-4",children:[t.jsxs(D,{variant:"destructive",children:[t.jsx(M,{className:"h-4 w-4"}),t.jsx(B,{children:this.state.error?.message||"An unexpected error occurred"})]}),!1,t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(A,{onClick:this.handleReset,className:"flex-1",children:[t.jsx(L,{className:"h-4 w-4 mr-2"}),"Try Again"]}),t.jsxs(A,{variant:"outline",onClick:this.handleReturnToLobby,className:"flex-1",children:[t.jsx(q,{className:"h-4 w-4 mr-2"}),"Return to Lobby"]})]})]})]})}):this.props.children}}export{re as C,q as H,se as M,te as a};
