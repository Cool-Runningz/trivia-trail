import{b as ie,c as X,j as s,r as D,f as ne,e as W,H as ce}from"./app-DceDa6fP.js";import{B as te}from"./button-BEFSYevM.js";import{C as G,a as M,b as V,c as Y,d as K}from"./card-B9bW9wxY.js";import{B as re,a as le,C as oe,A as ae}from"./badge-V6m1vSpl.js";import{R as de}from"./RoomCodeInput-1lAIIrHa.js";import{m as J}from"./index-CntUGQ0P.js";import{s as me,t as he,L as xe,A as fe,l as ue}from"./app-layout-CCvcS0Fr.js";import{c as ge,d as pe}from"./index-Dg3627jH.js";import{T as je}from"./trophy-QN65t5MC.js";import{C as ye}from"./clock-rTTEUQK7.js";import{T as _e}from"./target-CZ3Efnnk.js";import{U as be}from"./users-BN-ydjJ4.js";import{C as Ne,a as ve,M as Se}from"./ErrorBoundary-C6JLcNMG.js";import{P as we}from"./play-CFSDyowW.js";import"./app-B4ck186c.js";import"./input-C8Yjg6bZ.js";import"./label-1TPwh36p.js";import"./index-NTtcd7PD.js";import"./check-Cf2M5woQ.js";import"./copy-BPKOW-C2.js";import"./index-CHAUhqx5.js";import"./refresh-cw-DtP_ZnhD.js";const Ce=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Le=ie("Crown",Ce);function Re(g){const e=X.c(8),{participants:t,hostUserId:o}=g;let a,i;if(e[0]!==o||e[1]!==t){const d={joined:"bg-blue-500/10 text-blue-500 border-blue-500/20",ready:"bg-green-500/10 text-green-500 border-green-500/20",playing:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",finished:"bg-gray-500/10 text-gray-500 border-gray-500/20",disconnected:"bg-red-500/10 text-red-500 border-red-500/20"};let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r={joined:"Joined",ready:"Ready",playing:"Playing",finished:"Finished",disconnected:"Disconnected"},e[4]=r):r=e[4];const n=r;a="space-y-2",i=t.map(l=>{const f=l.user.id===o,m=l.user.name.split(" ").map(Pe).join("").toUpperCase().slice(0,2);return s.jsx(G,{children:s.jsxs(M,{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(me,{children:s.jsx(he,{children:m})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:l.user.name}),f&&s.jsx(Le,{className:"h-4 w-4 text-yellow-500","aria-label":"Host"})]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Score: ",l.score]})]})]}),s.jsx(re,{variant:"outline",className:ge(d[l.status]),children:n[l.status]})]})},l.id)}),e[0]=o,e[1]=t,e[2]=a,e[3]=i}else a=e[2],i=e[3];let c;return e[5]!==a||e[6]!==i?(c=s.jsx("div",{className:a,children:i}),e[5]=a,e[6]=i,e[7]=c):c=e[7],c}function Pe(g){return g[0]}function Ae(g){const e=X.c(25),{settings:t,maxPlayers:o,currentPlayers:a}=g;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={easy:"bg-green-500/10 text-green-500 border-green-500/20",medium:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",hard:"bg-red-500/10 text-red-500 border-red-500/20"},e[0]=i):i=e[0];const c=i;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs(V,{children:[s.jsx(Y,{children:"Game Settings"}),s.jsx(K,{children:"Configuration for this room"})]}),e[1]=d):d=e[1];let r,n;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(je,{className:"h-4 w-4"})}),n=s.jsx("p",{className:"text-sm font-medium",children:"Questions"}),e[2]=r,e[3]=n):(r=e[2],n=e[3]);let l;e[4]!==t.total_questions?(l=s.jsxs("div",{className:"flex items-center gap-3",children:[r,s.jsxs("div",{children:[n,s.jsx("p",{className:"text-sm text-muted-foreground",children:t.total_questions})]})]}),e[4]=t.total_questions,e[5]=l):l=e[5];let f,m;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(ye,{className:"h-4 w-4"})}),m=s.jsx("p",{className:"text-sm font-medium",children:"Time Limit"}),e[6]=f,e[7]=m):(f=e[6],m=e[7]);let h;e[8]!==t.time_per_question?(h=s.jsxs("div",{className:"flex items-center gap-3",children:[f,s.jsxs("div",{children:[m,s.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.time_per_question,"s"]})]})]}),e[8]=t.time_per_question,e[9]=h):h=e[9];let p,b;e[10]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(_e,{className:"h-4 w-4"})}),p=s.jsx("p",{className:"text-sm font-medium",children:"Difficulty"}),e[10]=p,e[11]=b):(p=e[10],b=e[11]);const N=c[t.difficulty];let u;e[12]!==t.difficulty||e[13]!==N?(u=s.jsxs("div",{className:"flex items-center gap-3",children:[b,s.jsxs("div",{children:[p,s.jsx(re,{variant:"outline",className:N,children:t.difficulty})]})]}),e[12]=t.difficulty,e[13]=N,e[14]=u):u=e[14];let j,y;e[15]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(be,{className:"h-4 w-4"})}),y=s.jsx("p",{className:"text-sm font-medium",children:"Players"}),e[15]=j,e[16]=y):(j=e[15],y=e[16]);let x;e[17]!==a||e[18]!==o?(x=s.jsxs("div",{className:"flex items-center gap-3",children:[j,s.jsxs("div",{children:[y,s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a," / ",o]})]})]}),e[17]=a,e[18]=o,e[19]=x):x=e[19];let _;return e[20]!==u||e[21]!==x||e[22]!==l||e[23]!==h?(_=s.jsxs(G,{children:[d,s.jsx(M,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l,h,u,x]})})]}),e[20]=u,e[21]=x,e[22]=l,e[23]=h,e[24]=_):_=e[24],_}const He={lobby:3e3,active:1e3,results:2e3,completed:5e3};function Ee(g,e){const t=X.c(6),o=e,[a,i]=D.useState("connected"),[c,d]=D.useState(null);let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=["room","participants","isHost","canStart","currentQuestion","timeRemaining","roundResults"],t[0]=r):r=t[0];let n;t[1]!==o?(n={only:r,onSuccess:()=>{i("connected"),d(new Date)},onError:()=>{i("reconnecting")}},t[1]=o,t[2]=n):n=t[2],ne(He[g],n);let l;return t[3]!==a||t[4]!==c?(l={connectionStatus:a,lastUpdate:c},t[3]=a,t[4]=c,t[5]=l):l=t[5],l}const Ie=[{title:"Dashboard",href:pe().url},{title:"Multiplayer Lobby",href:ue.index().url},{title:"Room Lobby",href:"#"}];function ls(g){const e=X.c(72),{room:t,participants:o,isHost:a,canStart:i}=g,[c,d]=D.useState(!1),[r,n]=D.useState(!1),{connectionStatus:l,lastUpdate:f}=Ee("lobby",!0);let m,h;e[0]!==t.room_code||e[1]!==t.status?(m=()=>{console.log("Room status:",t.status),t.status==="active"&&(console.log("Redirecting to game page..."),W.visit(J.game.show(t.room_code).url))},h=[t.status,t.room_code],e[0]=t.room_code,e[1]=t.status,e[2]=m,e[3]=h):(m=e[2],h=e[3]),D.useEffect(m,h);let p;e[4]!==t.room_code?(p=()=>{confirm("Are you sure you want to leave this room?")&&(d(!0),W.post(J.room.leave(t.room_code).url,{},{onFinish:()=>d(!1)}))},e[4]=t.room_code,e[5]=p):p=e[5];const b=p;let N;e[6]!==t.room_code?(N=()=>{n(!0),W.post(J.room.start(t.room_code).url,{},{onFinish:()=>n(!1)})},e[6]=t.room_code,e[7]=N):N=e[7];const u=N,j=o.length>=2,y=t.status==="active";let x,_;e[8]!==y||e[9]!==t.room_code?(x=()=>{y&&W.visit(J.game.show(t.room_code).url)},_=[y,t.room_code],e[8]=y,e[9]=t.room_code,e[10]=x,e[11]=_):(x=e[10],_=e[11]),D.useEffect(x,_);const Z=`Room ${t.room_code}`;let v;e[12]!==Z?(v=s.jsx(ce,{title:Z}),e[12]=Z,e[13]=v):v=e[13];let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsxs("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Room Lobby"}),s.jsx("p",{className:"text-muted-foreground",children:"Waiting for players to join..."})]}),e[14]=F):F=e[14];let S;e[15]!==l?(S=s.jsx(Ne,{status:l}),e[15]=l,e[16]=S):S=e[16];const ee=c||r;let z;e[17]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(xe,{className:"h-4 w-4 mr-2"}),e[17]=z):z=e[17];let w;e[18]!==b||e[19]!==ee?(w=s.jsxs(te,{variant:"outline",onClick:b,disabled:ee,children:[z,"Leave Room"]}),e[18]=b,e[19]=ee,e[20]=w):w=e[20];let C;e[21]!==S||e[22]!==w?(C=s.jsxs("div",{className:"flex items-center justify-between",children:[F,s.jsxs("div",{className:"flex items-center gap-4",children:[S,w]})]}),e[21]=S,e[22]=w,e[23]=C):C=e[23];let L;e[24]!==l||e[25]!==f?(L=s.jsx(ve,{status:l,lastUpdate:f,compact:!0}),e[24]=l,e[25]=f,e[26]=L):L=e[26];let O;e[27]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs(V,{children:[s.jsx(Y,{children:"Room Code"}),s.jsx(K,{children:"Share this code with friends to invite them"})]}),e[27]=O):O=e[27];let R;e[28]!==t.room_code?(R=s.jsxs(G,{children:[O,s.jsx(M,{children:s.jsx("div",{className:"max-w-md",children:s.jsx(de,{value:t.room_code,onChange:Ue,disabled:!0,showCopyButton:!0,label:""})})})]}),e[28]=t.room_code,e[29]=R):R=e[29];let P;e[30]!==o.length||e[31]!==t.max_players?(P=s.jsxs(Y,{children:["Players (",o.length," / ",t.max_players,")"]}),e[30]=o.length,e[31]=t.max_players,e[32]=P):P=e[32];const se=a?"You are the host":`Hosted by ${t.host?.name}`;let A;e[33]!==se?(A=s.jsx(K,{children:se}),e[33]=se,e[34]=A):A=e[34];let H;e[35]!==P||e[36]!==A?(H=s.jsxs(V,{children:[P,A]}),e[35]=P,e[36]=A,e[37]=H):H=e[37];let E;e[38]!==o||e[39]!==t.host_user_id?(E=s.jsx(M,{children:s.jsx(Re,{participants:o,hostUserId:t.host_user_id})}),e[38]=o,e[39]=t.host_user_id,e[40]=E):E=e[40];let I;e[41]!==H||e[42]!==E?(I=s.jsxs(G,{children:[H,E]}),e[41]=H,e[42]=E,e[43]=I):I=e[43];let U;e[44]!==i||e[45]!==u||e[46]!==j||e[47]!==a||e[48]!==r||e[49]!==o.length?(U=a&&s.jsxs(G,{children:[s.jsxs(V,{children:[s.jsx(Y,{children:"Host Controls"}),s.jsx(K,{children:"Start the game when ready"})]}),s.jsxs(M,{className:"space-y-4",children:[!j&&s.jsxs(le,{children:[s.jsx(oe,{className:"h-4 w-4"}),s.jsxs(ae,{children:["Need at least ",2," players to start the game. Currently have ",o.length,"."]})]}),s.jsxs(te,{onClick:u,disabled:!i||!j||r,className:"w-full",size:"lg",children:[s.jsx(we,{className:"h-5 w-5 mr-2"}),r?"Starting Game...":"Start Game"]})]})]}),e[44]=i,e[45]=u,e[46]=j,e[47]=a,e[48]=r,e[49]=o.length,e[50]=U):U=e[50];let k;e[51]!==a?(k=!a&&s.jsxs(le,{children:[s.jsx(oe,{className:"h-4 w-4"}),s.jsx(ae,{children:"Waiting for the host to start the game..."})]}),e[51]=a,e[52]=k):k=e[52];let T;e[53]!==I||e[54]!==U||e[55]!==k?(T=s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[I,U,k]}),e[53]=I,e[54]=U,e[55]=k,e[56]=T):T=e[56];let $;e[57]!==o.length||e[58]!==t.max_players||e[59]!==t.settings?($=s.jsx("div",{className:"space-y-4",children:s.jsx(Ae,{settings:t.settings,maxPlayers:t.max_players,currentPlayers:o.length})}),e[57]=o.length,e[58]=t.max_players,e[59]=t.settings,e[60]=$):$=e[60];let q;e[61]!==T||e[62]!==$?(q=s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[T,$]}),e[61]=T,e[62]=$,e[63]=q):q=e[63];let B;e[64]!==C||e[65]!==L||e[66]!==R||e[67]!==q?(B=s.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:s.jsxs("div",{className:"space-y-6",children:[C,L,R,q]})}),e[64]=C,e[65]=L,e[66]=R,e[67]=q,e[68]=B):B=e[68];let Q;return e[69]!==B||e[70]!==v?(Q=s.jsx(fe,{breadcrumbs:Ie,children:s.jsxs(Se,{children:[v,B]})}),e[69]=B,e[70]=v,e[71]=Q):Q=e[71],Q}function Ue(){}export{ls as default};
